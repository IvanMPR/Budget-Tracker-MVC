var t=class{constructor(){this.entriesArray=localStorage.getItem("entries")?JSON.parse(localStorage.getItem("entries")):[],this.stateObject={incomes:0,expenses:0,total:0,percentage:0,storage:{id:""}}}pushEntry(t){t&&this.entriesArray.push(t)}calcSum(t,e){return e.filter((e=>e.type===t)).map((t=>t.value)).reduce(((t,e)=>t+Number(e)),0)}parseDataFromEntries(){const t=this.calcSum("incomes",this.entriesArray),e=this.calcSum("expenses",this.entriesArray);this.stateObject.incomes=t,this.stateObject.expenses=e,this.stateObject.total=t-e;const s=this.stateObject.expenses/this.stateObject.incomes*100;return isNaN(s)||s===1/0||s<0?this.stateObject.percentage="---":this.stateObject.percentage=s%1!=0?`${s.toFixed(1)} %`:`${s} %`,this.stateObject}updateState(){this.parseDataFromEntries()}deleteEntry(t){const e=this.entriesArray.map((t=>t.id)).indexOf(t);this.entriesArray.splice(e,1)}findEntry(t){return this.entriesArray.filter((e=>e.id===t))[0]}editEntry(t,e,s){this.entriesArray.map((i=>(i.id!==t||(i.desc=e,i.value=s),i)))}};var e=class{constructor(){this.type=document.getElementById("inp"),this.desc=document.querySelector(".inputs__description--input"),this.val=document.querySelector(".inputs__value--num"),this.button=document.querySelector(".inputs__submit--btn"),this.editButton=document.querySelector(".inputs__submit--edit"),this.incList=document.querySelector(".transactions__incomes--ul"),this.expList=document.querySelector(".transactions__expenses--ul"),this.currentSum=document.querySelector(".amounts__current--p"),this.currentInc=document.querySelector(".amounts__income--p"),this.currentExp=document.querySelector(".amounts__expense--p"),this.iconButtonsParent=document.querySelector(".transactions"),this.percentage=document.querySelector(".amounts__expense--s")}addEditClass(t,e){this.button.classList.add("hidden"),this.editButton.classList.remove("hidden"),this.desc.value=t,this.desc.focus(),this.val.value=e}clearFields(){this.desc.value="",this.val.value="",this.desc.focus()}createEntry(){if(""===this.desc.value||!this.val)return alert("Please fill in all fields!"),void this.clearFields();const t={type:this.type.value,desc:this.desc.value,value:this.val.value,id:this.type.value.slice(0,1).toUpperCase()+Date.now()};return this.clearFields(),t}renderEntries(t){this.incList.innerHTML="",this.expList.innerHTML="",t.forEach((t=>{const e=`\n    <li class="transactions__${t.type}--li" data-id="${t.id}">\n      <p class="transactions__description transactions__incomes--p">${t.desc}</p>\n      <p class="transactions__value transactions__incomes--p">${t.value}\n        <span class="edit"><i title="Edit entry" class="fa-solid fa-pen-to-square edit-icon"></i></span>\n        <span title="Delete entry" class="delete"><i class="fa-solid fa-trash-can delete-icon"></i></span>\n      </p>\n   </li>`;document.querySelector(`.transactions__${t.type}--ul`).insertAdjacentHTML("beforeend",e)}))}updateSum(t){this.currentSum.textContent=this.formatAmount(t.total),this.currentInc.textContent=this.formatAmount(t.incomes),this.currentExp.textContent=this.formatAmount(t.expenses),this.percentage.textContent=t.percentage}formatAmount(t){return t.toLocaleString("en-US",{style:"currency",currency:"USD"})}};new class{constructor(t,e){this.m=t,this.v=e}ctrlClearFields(){this.v.clearFields(),this.m.stateObject.storage.id=""}ctrlEntry(){return this.v.createEntry()}ctrlPushEntry(){this.m.pushEntry(this.ctrlEntry())}ctrlUpdateState(){this.m.updateState()}ctrlRenderEntries(){this.v.renderEntries(this.m.entriesArray)}ctrlUpdateSum(){this.v.updateSum(this.m.stateObject)}ctrlAddEntry(){this.ctrlPushEntry(),this.ctrlUpdateEntries()}ctrlDeleteEntry(t){this.m.deleteEntry(t)}ctrlDeleteSequence(t){const e=t.target.closest("li").dataset.id;this.ctrlDeleteEntry(e),this.ctrlUpdateEntries()}ctrlUpdateEntries(){this.ctrlUpdateState(),this.ctrlUpdateSum(),this.ctrlRenderEntries()}ctrlEditEntry(t,e,s){this.m.editEntry(t,e,s)}ctrlAddEditClass(t,e){this.v.addEditClass(t,e)}ctrlEditFirstSequence(t){const e=t.target.closest("li").dataset.id;this.m.stateObject.storage.id=e;const s=this.ctrlFindEntry(e),i=s.value,n=s.desc;this.ctrlAddEditClass(n,i)}ctrlEditLastSequence(t,e,s){this.ctrlEditEntry(t,e,s),this.ctrlUpdateEntries(),this.ctrlRemoveEditClass()}ctrlRemoveEditClass(){this.v.editButton.classList.add("hidden"),this.v.button.classList.remove("hidden"),this.ctrlClearFields()}ctrlFindEntry(t){return this.m.findEntry(t)}listeners(){this.v.button.addEventListener("click",this.ctrlAddEntry.bind(this)),document.addEventListener("keydown",(t=>{"Enter"!==t.key||this.v.button.classList.contains("hidden")?"Enter"!==t.key||this.v.editButton.classList.contains("hidden")||this.ctrlEditLastSequence(this.m.stateObject.storage.id,this.v.desc.value,this.v.val.value):this.ctrlAddEntry()})),this.v.iconButtonsParent.addEventListener("click",(t=>{t.target.classList.contains("delete-icon")&&this.ctrlDeleteSequence(t)})),this.v.iconButtonsParent.addEventListener("click",(t=>{t.target.classList.contains("edit-icon")&&this.ctrlEditFirstSequence(t)})),this.v.editButton.addEventListener("click",(()=>{this.ctrlEditLastSequence(this.m.stateObject.storage.id,this.v.desc.value,this.v.val.value)})),window.addEventListener("beforeunload",(()=>{localStorage.setItem("entries",JSON.stringify(this.m.entriesArray))})),window.addEventListener("load",(()=>{localStorage.getItem("entries")&&this.ctrlUpdateEntries()}))}}(new t,new e).listeners();
//# sourceMappingURL=index.115f5fb6.js.map
